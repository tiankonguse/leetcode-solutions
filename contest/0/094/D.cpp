/*************************************************************************
    > File Name: A.cpp
    > Author: tiankonguse
    > Mail: i@tiankonguse.com
    > Created Time: 2019年04月19日 16:45:45
 ************************************************************************/


#include "../../include/base.h"

class Solution {
public:
    int lenLongestFibSubseq(vector<int>& A) {
        int ans = 0;
        set<int> s;
        for(int i=0;i<A.size();i++){
            s.insert(A[i]);
        }

        map<pair<int, int>, int> m;
        for(int i=0;i<A.size();i++){
            for(int j=i+1;j<A.size();j++){
                int next = A[j] + A[i];
                if(s.find(next) == s.end()){
                    continue;
                }
                auto nowP = make_pair(A[j], A[i]);
                auto nextP = make_pair(next, A[j]);
                if(m.find(nowP) == m.end()){
                    m[nextP] = 3;
                }else{
                    m[nextP] = m[nowP] + 1;
                    m.erase(nowP);
                }
                ans = max(ans, m[nextP]);
            }
        }
        if(ans == 2)ans=0;
        return ans;
    }
};

/*
    //ListNode* root = vecToList({1,2,3,4});

    TEST_SMP1(ClassName, FunNAme, expectAns, firstData)
    TEST_SMP2(ClassName, FunNAme, expectAns, firstData, secondData)

    int first;
    int expectAns;


    first = 1;
    expectAns = 1;
    TEST_SMP1(Solution, smallestRepunitDivByK, expectAns, first);
*/
int main() {
    vector<int> first;
    int expectAns;

    first = {1,2,3,4,5,6,7,8};
    expectAns = 5;
    TEST_SMP1(Solution, lenLongestFibSubseq, expectAns, first);

    first = {1,3,7,11,12,14,18};
    expectAns = 3;
    TEST_SMP1(Solution, lenLongestFibSubseq, expectAns, first);



    first = {3,11,19,20,21,35,39,41,44,47,48,55,58,59,67,68,79,89,91,93,96,97,98,102,103,117,123,125,137,138,140,157,158,187,192,193,202,214,229,233,246,255,261,295,317,325,327,331,367,370,403,412,488,509,514,527,545,596,603,649,667,783,826,841,852,876,963,973,1052,1079,1271,1335,1355,1379,1421,1559,1701,2054,2161,2196,2231,2297,2522,2753,3325,3496,3551,3610,3718,4081,4454,5379,5657,5747,5841,6015,6603,7207,8704,9153,9298,9451,9733,10684,11661,14083,14810,15045,15292,15748,17287,18868,22787,23963,24343,24743,27971,30529,36870,38773,39388,40035,45258,49397,59657,62736,63731,64778,73229,79926,96527,103119,104813,118487,129323,156184,169591,191716,209249,252711,274404,310203,338572,408895,443995,501919,547821,661606,718399,812122,1070501,1162394,1314041,1732107,2126163,2802608,3019618,3440204,3619072,4147881,4299901,4534715,5566367,6979835,7337323,8540102,9475531,9994893,11872038,14164725,16102369,17259682,19209361,19294826,19361634,19774734,20948672,24276826,29502637,29951468,30184182,31081399,31909870,35562787,37341371,39769605,41857316,42087061,42931948,43107586,44512761,45950912,45976117,47306989,48594558,49336400,50725645,50746000,53237057,53473242,54135556,54413036,55567837,63245083,64147377,64506802,65576821,66015940,66163850,67669073,67969722,68393465,69280432,69559063,69562255,69808150,71103049,71261658,71347039,73642958,73789708,75119847,76515985,77072900,77570308,79447034,82454913,82636792,83098106,83142368,83251285,83632377,84765725,85438865,85670754,85774176,85983305,86479838,89445474,90545978,90581162,90633827,92323558,94203341,94255465,97422977,100503969,101496491,102308503,108343188,108412788,111103040,112588252,115575356,115856709,117351805,117648306,119192008,120068379,120230293,121144190,121298359,121508157,124590862,126939986,127165334,130580572,132477968,132748619,132871309,133584395,134991405,137972542,138337697,139477246,140365537,141747376,141927253,142710797,145168370,147392139,147714979,147817993,149801825,150284562,151886278,153133281,153925764,154378144,155453873,156456171,156672509,157102579,159565286,159570006,161625176,161784058,161866263,165742210,166676609,167616504,170599628,170613898,172347306,173792570,174542717,175062035,175723847,176125531,177387058,179657562,180162803,180771930,183271141,184684998,184849792,184876128,185714244,185739419,190677182,191185534,192458410,192758540,194829169,195127856,195566723,196929030,197378269,198293279,199997943,202206991,204759040,206888492,207083803,208671900,211323758,211330379,213370211,215158688,215787158,216085311,216646154,216842789,216857040,216988242,217118279,218053335,218428430,218529321,222632553,222670502,223643195,223705133,224487420,227406547,227919845,227940218,228754831,228954803,229195039,229253979,230540222,233456505,233976760,234055793,234121318,234801345,235355447,237491869,238137705,238158977,239100225,239678581,239721557,240651976,241986215,244532930,247490319,248151502,249063696,251015852,251497485,251736860,251852014,252046194,252178662,255547963,256546068,257808473,260241580,262454441,263070851,267942640,269284803,269534947,271556319,272501752,272900211,274225903,275198357,276639779,277142237,279297971,280481013,280608005,282445196,282908985,284095177,284714308,284986390,286451353,286528235,288419449,288919613,289734599,290207020,290536372,292052375,293018479,293076617,298647687,298790115,299836829,302524733,304110056,305651817,306302954,308568588,308925158,312521378,313244513,314748242,314901953,316370149,317149442,318469362,319122438,319146427,320150548,321910658,321962271,322390459,322808270,325559653,325610953,326113895,328695876,330348480,331716437,333699023,333799869,334763163,337913751,341062304,341271890,343349235,345559895,346721999,348513785,349690859,350005933,354388993,356295415,360916886,361964136,365286354,365489612,366014374,370096487,371587241,372111153,372239249,372500466,375821259,376472904,377192225,377497868,377678789,377735564,377785209,378127240,379078243,380618960,382451196,382913848,383897100,385853254,385934279,386182760,389535654,389879643,390434433,391399069,393294369,398673055,399552587,400618151,403043531,404421331,405199301,405503807,405636399,406144260,406456967,407612493,409826045,410352357,411981368,412692830,413679800,414347482,415369043,416171645,416777431,417511518,420153975,422020756,423756271,423794593,425321955,427387513,429437095,429814995,430208147,430332080,432808522,433023500,434036751,439972667,443375469,443609468,447161441,449206997,452418663,452975284,453300409,456145868,456151191,458840022,459191078,462261204,462263024,462514725,463025033,463792867,463944196,466054964,468924531,469020944,469696429,471929724,474129183,475084311,477042267,477694957,478793064,480825570,482618191,482729703,486524375,489139788,491475339,491484478,492181086,492704930,493104934,494202110,497562429,497716924,499438648,500680980,501133476,501636555,503328968,504752890,505230567,506592583,506718759,507722492,507837558,513402139,513757395,514476632,515834148,516687396,518238457,519074581,519088888,520192975,523743492,525278021,525969158,525993337,526316969,526667364,526791195,526850330,528549910,529237904,529662833,530428789,531759347,533836394,535449927,536979935,537296821,542452287,544080704,545709939,545828545,546831352,548503809,549050337,551237949,554008375,554765986,554791864,555250449,555659462,556010280,557345415,557868107,557875949,558606413,558720180,559365864,561196207,561962765,562190710,562383676,562851740,563131653,563136060,563224274,565804615,567066387,569748344,571219636,571461338,573691326,574179699,574196161,575045860,575904119,575934885,580016444,580245687,580300216,581899856,582666357,583252240,583751254,584214665,586560160,586702864,588622476,588655056,588818222,589298015,589574347,590163364,590902041,590906042,595598512,596202465,597285817,599647928,599895396,602393235,604276955,605978947,606468683,607688973,609038940,610632035,611403498,613612281,613914611,615033508,615482259,616853126,618341329,622048979,622091663,624208565,627863696,628008031,628318122,628511568,628723951,634067524,635544495,637783448,638113190,638566075,639362675,639912223,641125050,641235328,642292365,642597406,643227895,643621200,643759256,646902505,648831043,650211783,651228356,652899234,653679276,654308944,655472341,655783674,656064528,657857417,661021735,661907784,663897300,664041265,666587956,666812061,667086592,671599070,672169979,672196880,673706859,676202036,676460966,677701733,678087503,682332496,682841698,684226181,687316546,687413376,687640769,687908719,689671689,690443705,693036400,695402384,696010559,696493080,696709457,697270098,698097251,698141113,698236712,698829796,699904164,700163685,700299913,701659579,706360902,708839191,708941449,709969452,711485795,714840216,715181450,715331900,717169585,718648130,718680890,719114209,720434733,720664762,720923814,720937050,721378690,726096604,730125321,730696356,730789485,731357054,731516855,736792470,737669295,738393452,738510892,739612906,740148396,742538719,743053532,745599881,748441890,750606380,754223333,755840620,755841995,755986747,759054944,760643482,761914873,763392620,763455879,764044055,764554189,767896803,768276368,769208871,770035792,771007603,772987378,775317294,777038783,779365360,780025489,780536920,782437532,783766343,786631883,787422264,788884401,788901317,792978910,795264161,795306774,795844025,797361282,797932455,799380842,799937636,801590669,802450594,804731246,804856126,805364425,806438425,806550197,808533256,809499242,809845976,810107922,810280853,810337484,811231302,812116530,812281342,815142497,815580140,818996194,820573882,820815281,822166989,822603908,823751447,824466014,824611412,826055748,826632472,827219794,828729692,829753879,829776456,831361611,832698371,836590660,837520995,838733356,838951663,839169666,841245242,841449869,842427827,843430296,844365837,844787084,845271456,850123796,851228928,851444214,851952684,851997282,853648219,853652965,853959483,854471045,854518062,855284451,856213919,856935054,858232322,859808559,860162318,862030795,862301262,863377181,866581201,868268290,869586672,871513168,872972279,874730959,876875866,877960821,886727417,888205231,889953525,890677283,896961989,897136059,897900549,902134578,902400576,903310561,903736232,904109253,904962976,905425625,906810152,907405233,911214136,914515324,914750422,915633750,917703562,918197627,920375850,922294112,923446061,924673960,924877514,925732108,928448947,929147960,929378950,929543628,929914086,930809491,932416543,934136842,934897645,938472413,938780828,939081068,940549369,941116539,943285595,943923996,944833691,947255520,951143862,952541363,953012204,954015520,954086414,954527745,955831578,956178692,956212492,956796672,959442844,960039820,963413807,964229401,964941505,965241889,965262684,965817896,966056109,968483844,968534045,969972529,970832973,974032224,974185422,974566067,975103091,975744695,976487340,976814924,978097830,978546725,979735620,980426911,983501543,984306449,984611683,985218114,988863511,989748643,992175680,992197407,994419413,994840549,994993281,995401591,997966551,998139619,998204566,998806648};
    expectAns = 29;
    TEST_SMP1(Solution, lenLongestFibSubseq, expectAns, first);


    return 0;
}

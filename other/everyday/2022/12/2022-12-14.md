# 2022-12-14 每日一题


题目: 1697. 检查边长度限制的路径是否存在  
难度：困难
题意: 无向图有n个顶点，告诉你 m 条边的权重，现在有 q 个询问，问顶点 ai 到顶点 bi 之间是否存在一条路径，路径上的边的权重都小于 vi。  


思路：顶点个数、边个数、询问都是 `10^5`，没法暴力计算，只能思考怎么复用前一个查询的信息。  


方法1：并查集。  


原问题是两点之间是否存在边权重都小于指定值的路径。  
可以想到，按照边权重从小到大建图，边建图边处理询问，即可判断是否满足要求。  


方法2：在线查询，贪心最小生成树+树上RMQ。  


1）转化为最小生成树
通过分析可以发现，两点之间边最小的路径是最小生成树上的路径。  
证明：按照边集从小到大排序建树，当加入的边形成环时，经过这条边的路径显然不会更优。
故可以先把图转化为最小生成树，并随意选择一个顶点，转化为有根树。  


2）预处理 RMQ
对于有根树，从根节点递归求出每个顶点到根节点方向的倍增节点及到对应节点路径的最大边。  


3）查询 LCA
根据预处理的 RMQ，求出 LCA，并根据 RMQ 求出查询节点到 LCA 节点的最大边，两个最大边取最大值就是路径的最大边。  


代码：手机没流量了，暂时不提交代码了。